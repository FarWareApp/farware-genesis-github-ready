import express from 'express';import cors from 'cors';import helmet from 'helmet';import morgan from 'morgan';import dotenv from 'dotenv';import compression from 'compression';import rateLimit from 'express-rate-limit';import uploadRouter from './routes/upload.js';import validateRouter from './routes/validate.js';import buildRouter from './routes/build.js';dotenv.config();const app=express();const PORT=process.env.PORT||8080;const ORIGIN=process.env.FRONTEND_ORIGIN||'*';app.use(helmet());app.use(cors({origin:ORIGIN}));app.use(express.json({limit:'1mb'}));app.use(compression());app.use(morgan('dev'));app.use(rateLimit({windowMs:15*60*1000,max:200}));app.get('/',(_,res)=>res.json({message:'FarWare Genesis API âœ…'}));app.use('/api/upload',uploadRouter);app.use('/api/validate',validateRouter);app.use('/api/build',buildRouter);app.use((err,req,res,next)=>{console.error(err);res.status(500).json({error:'Internal server error'});});app.listen(PORT,()=>console.log(`ðŸš€ API http://localhost:${PORT}`));