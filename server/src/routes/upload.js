import express from 'express';import multer from 'multer';import path from 'path';import fs from 'fs';const r=express.Router();const d=path.join(process.cwd(),'uploads');if(!fs.existsSync(d))fs.mkdirSync(d);const storage=multer.diskStorage({destination:(_,__,cb)=>cb(null,d),filename:(_,file,cb)=>cb(null,Date.now()+'-'+file.originalname)});const upload=multer({storage,limits:{fileSize:50*1024*1024}});r.post('/',upload.single('file'),(req,res)=>{if(!req.file)return res.status(400).json({error:'no file'});res.json({message:'ok',file:req.file.filename});});export default r;